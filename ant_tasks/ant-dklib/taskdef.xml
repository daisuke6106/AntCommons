<?xml version="1.0" encoding="Shift_JIS" ?>

<project name="IP Messenger" default="jar" basedir=".">

  <!--================================================-->
  <!-- 初期化 -->
  <!--================================================-->
  <target name="init">
    <property name="doc.dir" value="./doc" />
    <property name="src"   value  ="./src" />
    <property name="build" value  ="./bin" />
    <property name="dist"  value  ="./lib" />
  </target>
  
  <!--================================================-->
  <!-- コンパイル -->
  <!--================================================-->
  <target name="compile" depends="init">
    <mkdir dir="${build}" />
    <javac srcdir      = "${src}"
           destdir     = "${build}"
           deprecation = "true"
           debug       = "true"
           encoding    = "Shift_JIS"
           classpath   = "${dist}/gates/swt.jar" />
  </target>
  
  <!--================================================-->
  <!-- JARを作成 -->
  <!--================================================-->
  <target name="jar" depends="compile">
    <!-- IP Messengerライブラリ -->
    <jar jarfile  = "${dist}/ipmsg.jar"
         basedir  = "${build}"
         includes = "tk/ipmsg/*.class,brax3/messenger/*.class" />
         
    <!-- SWT版アプリケーション -->
    <jar jarfile  = "${dist}/ipmsg-swt.jar"
         basedir  = "${build}"
         includes = "tk/ipmsg/swt/*.class" />

  </target>
  
  <!--================================================-->
  <!-- javadocを生成 -->
  <!--================================================-->
  <target name="doc" depends="init">
    <mkdir dir="${doc.dir}" />
    <javadoc locale       = "ja"
             charset      = "Shift_JIS"
             encoding     = "Shift_JIS"
             docencoding  = "Shift_JIS"
             classpath    = "${dist}/*.jar"
             sourcepath   = "${src}"
             packagenames = "jp.co.dk.*"
             destdir      = "${doc.dir}">
    </javadoc>
  </target>
  
  <!--================================================-->
  <!-- ビルド用フォルダを削除 -->
  <!--================================================-->
  <target name="clean" depends="init">
    <delete dir="${build}" />
  </target>

</project>